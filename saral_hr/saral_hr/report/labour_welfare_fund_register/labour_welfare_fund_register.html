{%- set filters = frappe.form_dict or {} %}
{%- set month   = filters.get("month", "") %}
{%- set year    = filters.get("year", "") %}

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            font-size: 11px;
            color: #000;
        }

        .container {
            padding: 20px;
        }

        /* ── Header ── */
        .header {
            text-align: center;
            margin-bottom: 16px;
        }

        .header .company-name {
            font-size: 16px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .header .report-title {
            font-size: 13px;
            font-weight: bold;
            margin-top: 4px;
        }

        .header .period {
            font-size: 11px;
            margin-top: 2px;
            color: #444;
        }

        /* ── Table ── */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 12px;
        }

        thead tr th {
            background-color: #e8e8e8;
            border: 1px solid #999;
            padding: 7px 8px;
            text-align: center;
            font-size: 11px;
            font-weight: bold;
        }

        tbody tr td {
            border: 1px solid #bbb;
            padding: 6px 8px;
            font-size: 11px;
        }

        tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        td.num {
            text-align: right;
        }

        td.center {
            text-align: center;
        }

        /* ── Totals row ── */
        tr.total-row td {
            font-weight: bold;
            background-color: #eef4fb;
            border-top: 2px solid #555;
            border-bottom: 2px solid #555;
        }

        /* ── Footer ── */
        .footer {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
        }

        .footer .sign-block {
            text-align: center;
            width: 180px;
        }

        .footer .sign-block .line {
            border-top: 1px solid #000;
            margin-bottom: 4px;
        }

        .footer .sign-block .label {
            font-size: 10px;
            color: #444;
        }
    </style>
</head>
<body>
<div class="container">

    <!-- Header -->
    <div class="header">
        <div class="company-name">{{ company or "" }}</div>
        <div class="report-title">Labour Welfare Fund Register</div>
        <div class="period">For the Month of {{ month }} {{ year }}</div>
    </div>

    <!-- Table -->
    <table>
        <thead>
            <tr>
                <th style="width:50px;">Sr. No.</th>
                <th style="width:130px;">Employee ID</th>
                <th style="width:200px;">Employee Name</th>
                <th style="width:130px;">Mobile No</th>
                <th style="width:160px;">Aadhar No</th>
                <th style="width:120px;">Net Salary</th>
                <th style="width:110px;">LWF Amount</th>
            </tr>
        </thead>
        <tbody>
            {%- set ns = namespace(total_net=0, total_lwf=0) %}
            {%- for row in data %}
                {%- if row.get("employee_name") == "Total" %}
                    {# skip — we render our own totals row below #}
                {%- else %}
                    {%- set ns.total_net = ns.total_net + (row.net_salary or 0) %}
                    {%- set ns.total_lwf = ns.total_lwf + (row.lwf_amount or 0) %}
                    <tr>
                        <td class="center">{{ row.sr_no }}</td>
                        <td>{{ row.employee_id or "" }}</td>
                        <td>{{ row.employee_name or "" }}</td>
                        <td class="center">{{ row.mobile_no or "-" }}</td>
                        <td class="center">{{ row.aadhar_no or "-" }}</td>
                        <td class="num">{{ "%.2f"|format(row.net_salary or 0) }}</td>
                        <td class="num">{{ "%.2f"|format(row.lwf_amount or 0) }}</td>
                    </tr>
                {%- endif %}
            {%- endfor %}

            <!-- Totals row -->
            <tr class="total-row">
                <td colspan="5" style="text-align:right; padding-right:12px;">Total</td>
                <td class="num">{{ "%.2f"|format(ns.total_net) }}</td>
                <td class="num">{{ "%.2f"|format(ns.total_lwf) }}</td>
            </tr>
        </tbody>
    </table>

    <!-- Signature footer -->
    <div class="footer">
        <div class="sign-block">
            <div class="line"></div>
            <div class="label">Prepared By</div>
        </div>
        <div class="sign-block">
            <div class="line"></div>
            <div class="label">Checked By</div>
        </div>
        <div class="sign-block">
            <div class="line"></div>
            <div class="label">Authorised Signatory</div>
        </div>
    </div>

</div>
</body>
</html>