{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2026-01-22 12:25:29.382249",
 "css": ".payslip-container {\r\n    border: 1px solid black;\r\n    padding: 10px;\r\n    font-family: Arial, sans-serif;\r\n}\r\n\r\n.print-heading {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    text-align: center;\r\n}\r\n\r\n.company-details {\r\n    padding-left: 0;\r\n    width: 100%;\r\n}\r\n\r\n.company-details h2 {\r\n    margin: 0;\r\n}\r\n\r\n.company-details p {\r\n    margin: 4px 0 0 0;\r\n    font-size: 12px;\r\n}\r\n\r\n.payslip-title {\r\n    height: 34px;\r\n    background-color: #f2f2f2;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n.payslip-title h2 {\r\n    font-size: 15px;\r\n    margin: 0;\r\n    font-weight: bold;\r\n}\r\n\r\n/* Employee Summary Table */\r\n.employee-summary {\r\n    margin-top: 8px;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.summary-table {\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n    font-size: 11px;\r\n}\r\n\r\n.summary-table .summary-title {\r\n    background-color: #e8e8e8;\r\n    font-weight: bold;\r\n    font-size: 13px;\r\n    padding: 6px 8px;\r\n    text-align: left;\r\n    border: 1px solid #ccc;\r\n}\r\n\r\n.summary-table .label-cell {\r\n    font-weight: 600;\r\n    padding: 4px 8px;\r\n    background-color: #f5f5f5;\r\n    border: 1px solid #ddd;\r\n    width: 16%;\r\n    color: #333;\r\n}\r\n\r\n.summary-table .value-cell {\r\n    padding: 4px 8px;\r\n    border: 1px solid #ddd;\r\n    width: 17%;\r\n    color: #555;\r\n}\r\n\r\n.summary-table .section-divider td {\r\n    border-top: 2px solid #bbb;\r\n}\r\n\r\n/* Earnings and Deductions Row - Three Columns */\r\n.earnings-deductions-row {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-top: 8px;\r\n    gap: 8px;\r\n}\r\n\r\n.table-section-third {\r\n    width: 32%;\r\n}\r\n\r\n.table-section-third table {\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n    font-size: 12px;\r\n    table-layout: fixed;\r\n}\r\n\r\n.table-section-third th {\r\n    border-bottom: 1px solid black;\r\n    padding: 5px;\r\n    font-weight: bold;\r\n    background-color: #f8f8f8;\r\n}\r\n\r\n.table-section-third td {\r\n    padding: 5px;\r\n    overflow-wrap: break-word;\r\n}\r\n\r\n.table-section-third td:first-child {\r\n    width: 60%;\r\n}\r\n\r\n.table-section-third td:last-child {\r\n    width: 40%;\r\n}\r\n\r\n.table-section-third td.right-align {\r\n    white-space: nowrap;\r\n    text-align: right;\r\n}\r\n\r\n.right-align {\r\n    text-align: right;\r\n}\r\n\r\n/* Totals Grid */\r\n.totals-grid {\r\n    margin-top: 12px;\r\n    border-top: 2px solid black;\r\n    padding-top: 8px;\r\n}\r\n\r\n.total-row {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 6px 0;\r\n    font-size: 13px;\r\n}\r\n\r\n.total-row.highlight {\r\n    background-color: #e8f4f8;\r\n    padding: 8px 10px;\r\n    margin-top: 4px;\r\n    font-weight: bold;\r\n    font-size: 14px;\r\n}\r\n\r\n.total-label {\r\n    font-weight: bold;\r\n}\r\n\r\n.total-value {\r\n    font-weight: bold;\r\n    text-align: right;\r\n}\r\n\r\n/* Net Payable Section */\r\n.net-payable-section {\r\n    margin-top: 10px;\r\n    padding: 8px;\r\n    background-color: #f2f2f2;\r\n    text-align: center;\r\n}\r\n\r\n.net-amount {\r\n    font-weight: bold;\r\n    font-size: 16px;\r\n    margin: 0 0 4px 0;\r\n}",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Salary Slip",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{% set company_address = frappe.db.get_value(\r\n    \"Company\",\r\n    doc.company,\r\n    \"address\"\r\n) if doc.company else \"\" %}\r\n\r\n{# The doc.employee field is the Company Link ID #}\r\n{# Fetch employee name and other details from Company Link #}\r\n{% set company_link_details = frappe.db.get_value(\r\n    \"Company Link\",\r\n    doc.employee,\r\n    [\"employee\", \"date_of_joining\", \"designation\", \"department\", \"branch\", \"category\", \"division\"],\r\n    as_dict=1\r\n) if doc.employee else {} %}\r\n\r\n{% set doj = company_link_details.date_of_joining if company_link_details else None %}\r\n{% set employee_link = company_link_details.employee if company_link_details else None %}\r\n{% set designation = company_link_details.designation if company_link_details else None %}\r\n{% set department = company_link_details.department if company_link_details else None %}\r\n{% set branch = company_link_details.branch if company_link_details else None %}\r\n{% set category = company_link_details.category if company_link_details else None %}\r\n{% set division = company_link_details.division if company_link_details else None %}\r\n\r\n{# Now fetch Employee statutory details from Employee doctype #}\r\n{% set employee_details = frappe.db.get_value(\r\n    \"Employee\",\r\n    employee_link,\r\n    [\"employee_pf_account\", \"esic_number\", \"lin_number\", \"bank_name\", \"account_number\", \"ifsc_code\", \"gender\"],\r\n    as_dict=1\r\n) if employee_link else {} %}\r\n\r\n{% set present_days = (doc.total_working_days or 0) - (doc.absent_days or 0) %}\r\n\r\n{% set present_days = (doc.total_working_days or 0) - (doc.absent_days or 0) %}\r\n\r\n{# Fetch Salary Structure Assignment for this employee and date range #}\r\n{% set salary_assignment = frappe.db.sql(\"\"\"\r\n    SELECT name, from_date, to_date \r\n    FROM `tabSalary Structure Assignment`\r\n    WHERE employee = %s\r\n    AND from_date <= %s\r\n    AND (to_date IS NULL OR to_date >= %s)\r\n    ORDER BY from_date DESC\r\n    LIMIT 1\r\n\"\"\", (doc.employee, doc.end_date, doc.start_date), as_dict=1) %}\r\n\r\n{% set assignment_name = salary_assignment[0].name if salary_assignment else None %}\r\n\r\n{# Fetch earnings from Salary Structure Assignment #}\r\n{% set assignment_earnings = [] %}\r\n{% if assignment_name %}\r\n    {% set assignment_earnings = frappe.db.sql(\"\"\"\r\n        SELECT salary_component, amount\r\n        FROM `tabSalary Details`\r\n        WHERE parent = %s\r\n        AND parenttype = 'Salary Structure Assignment'\r\n        AND parentfield = 'earnings'\r\n        AND amount > 0\r\n        ORDER BY idx ASC\r\n    \"\"\", (assignment_name,), as_dict=1) %}\r\n{% endif %}\r\n\r\n{# Create a set of salary components from assignment for easy lookup #}\r\n{% set assignment_components = [] %}\r\n{% for ae in assignment_earnings %}\r\n    {% set _ = assignment_components.append(ae.salary_component) %}\r\n{% endfor %}\r\n\r\n<div class=\"payslip-container\">\r\n\r\n    <!-- Header -->\r\n    <div class=\"print-heading\">\r\n        <div class=\"company-details\">\r\n            <h2><strong>{{ doc.company }}</strong></h2>\r\n\r\n            <p>\r\n                {% if company_address %}\r\n                    <strong>Address:</strong> {{ company_address }}\r\n                {% else %}\r\n                    <strong>Head Office Address:</strong>\r\n                    Bajaj Steel Industries Limited, C-108, M.I.D.C. Industrial Area,\r\n                    Hingna Road, Nagpur, Maharashtra - 440016\r\n                {% endif %}\r\n            </p>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Payslip Title -->\r\n    <div class=\"payslip-title\">\r\n        <h2>\r\n            Payslip for the Month of\r\n            {{ frappe.utils.formatdate(doc.start_date, \"MMMM yyyy\") }}\r\n        </h2>\r\n    </div>\r\n\r\n    <!-- Employee Pay Summary -->\r\n    <div class=\"employee-summary\">\r\n        <table class=\"summary-table\">\r\n            <thead>\r\n                <tr>\r\n                    <th colspan=\"6\" class=\"summary-title\">Employee Pay Summary</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <!-- Row 1: Basic Information -->\r\n                <tr>\r\n                    <td class=\"label-cell\">Employee Name</td>\r\n                    <td class=\"value-cell\">{{ doc.employee_name }}</td>\r\n                    <td class=\"label-cell\">Gender</td>\r\n                    <td class=\"value-cell\">{{ employee_details.gender or \"-\" }}</td>\r\n                    <td class=\"label-cell\">Date of Joining</td>\r\n                    <td class=\"value-cell\">{{ frappe.utils.formatdate(doj, \"dd-MM-yyyy\") if doj else \"-\" }}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td class=\"label-cell\">Designation</td>\r\n                    <td class=\"value-cell\">{{ designation or \"-\" }}</td>\r\n                    <td class=\"label-cell\">Department</td>\r\n                    <td class=\"value-cell\">{{ department or \"-\" }}</td>\r\n                    <td class=\"label-cell\">Branch</td>\r\n                    <td class=\"value-cell\">{{ branch or \"-\" }}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td class=\"label-cell\">Category</td>\r\n                    <td class=\"value-cell\">{{ category or \"-\" }}</td>\r\n                    <td class=\"label-cell\">Division</td>\r\n                    <td class=\"value-cell\">{{ division or \"-\" }}</td>\r\n                    <td class=\"label-cell\">Payment Days</td>\r\n                    <td class=\"value-cell\">{{ doc.payment_days or 0 }}</td>\r\n                </tr>\r\n                \r\n                <!-- Row 2: Statutory Details -->\r\n                <tr class=\"section-divider\">\r\n                    <td class=\"label-cell\">PF Account No</td>\r\n                    <td class=\"value-cell\">{{ employee_details.employee_pf_account or \"-\" }}</td>\r\n                    <td class=\"label-cell\">ESI Number</td>\r\n                    <td class=\"value-cell\">{{ employee_details.esic_number or \"-\" }}</td>\r\n                    <td class=\"label-cell\">LIN Number</td>\r\n                    <td class=\"value-cell\">{{ employee_details.lin_number or \"-\" }}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td class=\"label-cell\">Bank Name</td>\r\n                    <td class=\"value-cell\">{{ employee_details.bank_name or \"-\" }}</td>\r\n                    <td class=\"label-cell\">Account Number</td>\r\n                    <td class=\"value-cell\">{{ employee_details.account_number or \"-\" }}</td>\r\n                    <td class=\"label-cell\">IFSC Code</td>\r\n                    <td class=\"value-cell\">{{ employee_details.ifsc_code or \"-\" }}</td>\r\n                </tr>\r\n                \r\n                <!-- Row 3: Attendance -->\r\n                <tr class=\"section-divider\">\r\n                    <td class=\"label-cell\">Working Days</td>\r\n                    <td class=\"value-cell\">{{ doc.total_working_days or 0 }}</td>\r\n                    <td class=\"label-cell\">Present Days</td>\r\n                    <td class=\"value-cell\">{{ present_days }}</td>\r\n                    <td class=\"label-cell\">Absent Days</td>\r\n                    <td class=\"value-cell\">{{ doc.absent_days or 0 }}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n    <!-- Earnings and Deductions Section - All in One Row -->\r\n    <div class=\"earnings-deductions-row\">\r\n        \r\n        <!-- Salary Assignment Earnings -->\r\n        <div class=\"table-section-third\">\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th colspan=\"2\">Earnings</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {% if assignment_earnings %}\r\n                        {% for ae in assignment_earnings %}\r\n                        <tr>\r\n                            <td>{{ ae.salary_component }}</td>\r\n                            <td class=\"right-align\">\r\n                                {{ frappe.utils.fmt_money(ae.amount, currency=doc.currency) }}\r\n                            </td>\r\n                        </tr>\r\n                        {% endfor %}\r\n                    {% else %}\r\n                        <tr>\r\n                            <td colspan=\"2\" style=\"text-align: center; font-style: italic; color: #666;\">\r\n                                No assignment earnings\r\n                            </td>\r\n                        </tr>\r\n                    {% endif %}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n        <!-- Computed Earnings -->\r\n        <div class=\"table-section-third\">\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th colspan=\"2\">Computed Earnings</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {% set computed_items = [] %}\r\n                    {% for e in doc.earnings %}\r\n                        {% if e.amount and e.amount > 0 %}\r\n                            {% set _ = computed_items.append(e) %}\r\n                        {% endif %}\r\n                    {% endfor %}\r\n                    \r\n                    {% if computed_items %}\r\n                        {% for e in computed_items %}\r\n                        <tr>\r\n                            <td>{{ e.salary_component }}</td>\r\n                            <td class=\"right-align\">\r\n                                {{ frappe.utils.fmt_money(e.amount, currency=doc.currency) }}\r\n                            </td>\r\n                        </tr>\r\n                        {% endfor %}\r\n                    {% else %}\r\n                        <tr>\r\n                            <td colspan=\"2\" style=\"text-align: center; font-style: italic; color: #666;\">\r\n                                No computed earnings\r\n                            </td>\r\n                        </tr>\r\n                    {% endif %}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n        <!-- Deductions -->\r\n        <div class=\"table-section-third\">\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th colspan=\"2\">Deductions</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {% set deduction_items = [] %}\r\n                    {% for d in doc.deductions %}\r\n                        {# Get salary component details to check employer_contribution and deduct_from_cash_in_hand_only #}\r\n                        {% set component_details = frappe.db.get_value(\r\n                            \"Salary Component\",\r\n                            d.salary_component,\r\n                            [\"employer_contribution\", \"deduct_from_cash_in_hand_only\"],\r\n                            as_dict=1\r\n                        ) %}\r\n                        {% if d.amount and d.amount > 0 and component_details and not component_details.employer_contribution and not component_details.deduct_from_cash_in_hand_only %}\r\n                            {% set _ = deduction_items.append(d) %}\r\n                        {% endif %}\r\n                    {% endfor %}\r\n                    \r\n                    {% if deduction_items %}\r\n                        {% for d in deduction_items %}\r\n                        <tr>\r\n                            <td>{{ d.salary_component }}</td>\r\n                            <td class=\"right-align\">\r\n                                {{ frappe.utils.fmt_money(d.amount, currency=doc.currency) }}\r\n                            </td>\r\n                        </tr>\r\n                        {% endfor %}\r\n                    {% else %}\r\n                        <tr>\r\n                            <td colspan=\"2\" style=\"text-align: center; font-style: italic; color: #666;\">\r\n                                No deductions\r\n                            </td>\r\n                        </tr>\r\n                    {% endif %}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <!-- Totals Summary -->\r\n    <div class=\"totals-grid\">\r\n        <div class=\"total-row\">\r\n            <div class=\"total-label\">Gross Salary</div>\r\n            <div class=\"total-value\">\r\n                {{ frappe.utils.fmt_money(doc.gross_salary, currency=doc.currency) }}\r\n            </div>\r\n        </div>\r\n        <div class=\"total-row\">\r\n            <div class=\"total-label\">Total Deductions</div>\r\n            <div class=\"total-value\">\r\n                {{ frappe.utils.fmt_money(doc.total_deductions, currency=doc.currency) }}\r\n            </div>\r\n        </div>\r\n        <div class=\"total-row highlight\">\r\n            <div class=\"total-label\">Net Salary</div>\r\n            <div class=\"total-value\">\r\n                {{ frappe.utils.fmt_money(doc.net_salary, currency=doc.currency) }}\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- Net Pay in Words -->\r\n    <div class=\"net-payable-section\">\r\n        <p class=\"net-amount\">\r\n            Total Net Payable:\r\n            {{ frappe.utils.fmt_money(doc.net_salary, currency=doc.currency) }}\r\n        </p>\r\n        <p style=\"font-size: 12px;\">\r\n            ({{ frappe.utils.money_in_words(doc.net_salary, doc.currency) }})\r\n        </p>\r\n    </div>\r\n\r\n</div>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2026-02-05 16:10:19.468777",
 "modified_by": "Administrator",
 "module": "Saral Hr",
 "name": "Salary Slip Custom",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}